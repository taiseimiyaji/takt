name: e2e-mock-two-step
description: Two-step sequential piece for E2E testing
piece_config:
  provider_options:
    codex:
      network_access: true
    opencode:
      network_access: true


max_movements: 5

initial_movement: step-1

movements:
  - name: step-1
    edit: true
    persona: ../agents/test-coder.md
    required_permission_mode: edit
    instruction_template: |
      {task}
    rules:
      - condition: Done
        next: step-2

  - name: step-2
    edit: true
    persona: ../agents/test-coder.md
    required_permission_mode: edit
    instruction_template: |
      Continue the task.
    rules:
      - condition: Done
        next: COMPLETE
